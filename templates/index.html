<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Defacement Monitor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f8f9fa;
        }
        .container {
            background: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        .help-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            color: #007bff;
            cursor: pointer;
        }
        .help-text {
            display: none;
            position: absolute;
            top: 40px;
            right: 10px;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 10px;
            max-width: 300px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4">Defacement Monitor</h1>
        <h4 class="mb-4">Made by <a href="https://github.com/ParzivalHack" target="_blank">Tommaso Bona</a></h4>
        
        <i class="fas fa-question-circle help-icon" onclick="toggleHelpText()"></i>
        <div class="help-text" id="helpText">
            To Use: Create a FREE account on <a href="https://pushover.net" target="_blank">Pushover</a>, then log in and you will see "Your User Key" in the top right corner of your dashboard. To get an API Token, scroll down to the bottom of your Pushover dashboard, in "Your Applications" click on "Create an Application/API Token", give it a name a click on "Create Application", then you'll see your API Token right under "API Token/Key"!
        </div>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        
        <form method="post" action="{{ url_for('index') }}">
            <div class="mb-3">
                <label for="user_key" class="form-label">User Key</label>
                <input type="text" class="form-control" id="user_key" name="user_key" value="{{ user_key }}" required>
            </div>
            <div class="mb-3">
                <label for="api_token" class="form-label">API Token</label>
                <input type="text" class="form-control" id="api_token" name="api_token" value="{{ api_token }}" required>
            </div>
            <div class="mb-3">
                <label for="url" class="form-label">URL to Monitor</label>
                <input type="text" class="form-control" id="url" name="url" value="{{ url }}" required>
            </div>
            <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="save_config" name="save_config">
                <label class="form-check-label" for="save_config">Save Configuration</label>
            </div>
            <button type="submit" class="btn btn-primary">Save & Start Monitoring</button>
        </form>
        <hr>
        <form method="post" action="{{ url_for('send_test_notification') }}">
            <h2 class="mb-3">Send Test Notification</h2>
            <div class="mb-3">
                <label for="title" class="form-label">Title</label>
                <input type="text" class="form-control" id="title" name="title" required>
            </div>
            <div class="mb-3">
                <label for="message" class="form-label">Message</label>
                <textarea class="form-control" id="message" name="message" rows="3" required></textarea>
            </div>
            <button type="submit" class="btn btn-success">Send Test Notification</button>
        </form>
        <hr>
        <form method="post" action="{{ url_for('start_monitoring') }}">
            <button type="submit" class="btn btn-warning">Start Monitoring</button>
        </form>
        <form method="post" action="{{ url_for('stop_monitoring') }}" class="mt-2">
            <button type="submit" class="btn btn-danger">Stop Monitoring</button>
        </form>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script>
        function toggleHelpText() {
            var helpText = document.getElementById("helpText");
            helpText.style.display = helpText.style.display === "none" ? "block" : "none";
        }
    </script>
</body>
</html>
